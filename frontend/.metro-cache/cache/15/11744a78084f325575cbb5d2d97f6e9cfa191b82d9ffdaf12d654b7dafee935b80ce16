{"dependencies":[{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.requestNotificationPermissions = requestNotificationPermissions;\n  exports.scheduleDebtReminder = scheduleDebtReminder;\n  exports.cancelAllNotifications = cancelAllNotifications;\n  exports.cancelNotification = cancelNotification;\n  var _expoNotifications = require(_dependencyMap[0], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  // Configure notification handler\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: false\n    })\n  });\n  async function requestNotificationPermissions() {\n    if (Platform.default.OS === 'web') return false;\n    const {\n      status: existingStatus\n    } = await Notifications.getPermissionsAsync();\n    let finalStatus = existingStatus;\n    if (existingStatus !== 'granted') {\n      const {\n        status\n      } = await Notifications.requestPermissionsAsync();\n      finalStatus = status;\n    }\n    return finalStatus === 'granted';\n  }\n  async function scheduleDebtReminder(debt) {\n    const notificationIds = [];\n    const dueDate = new Date(debt.dueDate);\n    const now = new Date();\n\n    // Calculate 2 days before due date\n    const twoDaysBefore = new Date(dueDate);\n    twoDaysBefore.setDate(twoDaysBefore.getDate() - 2);\n    twoDaysBefore.setHours(9, 0, 0, 0);\n    const debtTypeText = debt.type === 'لنا' ? 'مستحق لك' : 'عليك';\n\n    // Schedule reminder 2 days before (if in the future)\n    if (twoDaysBefore > now) {\n      try {\n        const id = await Notifications.scheduleNotificationAsync({\n          content: {\n            title: 'تذكير بالدين',\n            body: `${debtTypeText} دين من ${debt.personName} بقيمة ${debt.totalAmount} - يستحق بعد يومين`,\n            data: {\n              debtId: debt.id\n            }\n          },\n          trigger: {\n            type: Notifications.SchedulableTriggerInputTypes.DATE,\n            date: twoDaysBefore\n          }\n        });\n        notificationIds.push(id);\n      } catch (error) {\n        console.error('Error scheduling 2-day reminder:', error);\n      }\n    }\n\n    // Schedule reminder on due date\n    const onDueDate = new Date(dueDate);\n    onDueDate.setHours(9, 0, 0, 0);\n    if (onDueDate > now) {\n      try {\n        const id = await Notifications.scheduleNotificationAsync({\n          content: {\n            title: 'موعد استحقاق الدين',\n            body: `${debtTypeText} دين من ${debt.personName} بقيمة ${debt.totalAmount} - مستحق اليوم`,\n            data: {\n              debtId: debt.id\n            }\n          },\n          trigger: {\n            type: Notifications.SchedulableTriggerInputTypes.DATE,\n            date: onDueDate\n          }\n        });\n        notificationIds.push(id);\n      } catch (error) {\n        console.error('Error scheduling due date reminder:', error);\n      }\n    }\n    return notificationIds;\n  }\n  async function cancelAllNotifications() {\n    await Notifications.cancelAllScheduledNotificationsAsync();\n  }\n  async function cancelNotification(id) {\n    await Notifications.cancelScheduledNotificationAsync(id);\n  }\n});","lineCount":121,"map":[[27,2,14,0,"exports"],[27,9,14,0],[27,10,14,0,"requestNotificationPermissions"],[27,40,14,0],[27,43,14,0,"requestNotificationPermissions"],[27,73,14,0],[28,2,28,0,"exports"],[28,9,28,0],[28,10,28,0,"scheduleDebtReminder"],[28,30,28,0],[28,33,28,0,"scheduleDebtReminder"],[28,53,28,0],[29,2,86,0,"exports"],[29,9,86,0],[29,10,86,0,"cancelAllNotifications"],[29,32,86,0],[29,35,86,0,"cancelAllNotifications"],[29,57,86,0],[30,2,90,0,"exports"],[30,9,90,0],[30,10,90,0,"cancelNotification"],[30,28,90,0],[30,31,90,0,"cancelNotification"],[30,49,90,0],[31,2,1,0],[31,6,1,0,"_expoNotifications"],[31,24,1,0],[31,27,1,0,"require"],[31,34,1,0],[31,35,1,0,"_dependencyMap"],[31,49,1,0],[32,2,1,0],[32,6,1,0,"Notifications"],[32,19,1,0],[32,22,1,0,"_interopNamespace"],[32,39,1,0],[32,40,1,0,"_expoNotifications"],[32,58,1,0],[33,2,1,52],[33,6,1,52,"_reactNativeWebDistExportsPlatform"],[33,40,1,52],[33,43,1,52,"require"],[33,50,1,52],[33,51,1,52,"_dependencyMap"],[33,65,1,52],[34,2,1,52],[34,6,1,52,"Platform"],[34,14,1,52],[34,17,1,52,"_interopDefault"],[34,32,1,52],[34,33,1,52,"_reactNativeWebDistExportsPlatform"],[34,67,1,52],[35,2,5,0],[36,2,6,0,"Notifications"],[36,15,6,13],[36,16,6,14,"setNotificationHandler"],[36,38,6,36],[36,39,6,37],[37,4,7,2,"handleNotification"],[37,22,7,20],[37,24,7,22],[37,30,7,22,"handleNotification"],[37,31,7,22],[37,37,7,35],[38,6,8,4,"shouldShowAlert"],[38,21,8,19],[38,23,8,21],[38,27,8,25],[39,6,9,4,"shouldPlaySound"],[39,21,9,19],[39,23,9,21],[39,27,9,25],[40,6,10,4,"shouldSetBadge"],[40,20,10,18],[40,22,10,20],[41,4,11,2],[41,5,11,3],[42,2,12,0],[42,3,12,1],[42,4,12,2],[43,2,14,7],[43,17,14,22,"requestNotificationPermissions"],[43,47,14,52,"requestNotificationPermissions"],[43,48,14,52],[43,50,14,73],[44,4,15,2],[44,8,15,6,"Platform"],[44,16,15,14],[44,17,15,14,"default"],[44,24,15,14],[44,25,15,15,"OS"],[44,27,15,17],[44,32,15,22],[44,37,15,27],[44,39,15,29],[44,46,15,36],[44,51,15,41],[45,4,17,2],[45,10,17,8],[46,6,17,10,"status"],[46,12,17,16],[46,14,17,18,"existingStatus"],[47,4,17,33],[47,5,17,34],[47,8,17,37],[47,14,17,43,"Notifications"],[47,27,17,56],[47,28,17,57,"getPermissionsAsync"],[47,47,17,76],[47,48,17,77],[47,49,17,78],[48,4,18,2],[48,8,18,6,"finalStatus"],[48,19,18,17],[48,22,18,20,"existingStatus"],[48,36,18,34],[49,4,20,2],[49,8,20,6,"existingStatus"],[49,22,20,20],[49,27,20,25],[49,36,20,34],[49,38,20,36],[50,6,21,4],[50,12,21,10],[51,8,21,12,"status"],[52,6,21,19],[52,7,21,20],[52,10,21,23],[52,16,21,29,"Notifications"],[52,29,21,42],[52,30,21,43,"requestPermissionsAsync"],[52,53,21,66],[52,54,21,67],[52,55,21,68],[53,6,22,4,"finalStatus"],[53,17,22,15],[53,20,22,18,"status"],[53,26,22,24],[54,4,23,2],[55,4,25,2],[55,11,25,9,"finalStatus"],[55,22,25,20],[55,27,25,25],[55,36,25,34],[56,2,26,0],[57,2,28,7],[57,17,28,22,"scheduleDebtReminder"],[57,37,28,42,"scheduleDebtReminder"],[57,38,28,43,"debt"],[57,42,28,53],[57,44,28,74],[58,4,29,2],[58,10,29,8,"notificationIds"],[58,25,29,33],[58,28,29,36],[58,30,29,38],[59,4,30,2],[59,10,30,8,"dueDate"],[59,17,30,15],[59,20,30,18],[59,24,30,22,"Date"],[59,28,30,26],[59,29,30,27,"debt"],[59,33,30,31],[59,34,30,32,"dueDate"],[59,41,30,39],[59,42,30,40],[60,4,31,2],[60,10,31,8,"now"],[60,13,31,11],[60,16,31,14],[60,20,31,18,"Date"],[60,24,31,22],[60,25,31,23],[60,26,31,24],[62,4,33,2],[63,4,34,2],[63,10,34,8,"twoDaysBefore"],[63,23,34,21],[63,26,34,24],[63,30,34,28,"Date"],[63,34,34,32],[63,35,34,33,"dueDate"],[63,42,34,40],[63,43,34,41],[64,4,35,2,"twoDaysBefore"],[64,17,35,15],[64,18,35,16,"setDate"],[64,25,35,23],[64,26,35,24,"twoDaysBefore"],[64,39,35,37],[64,40,35,38,"getDate"],[64,47,35,45],[64,48,35,46],[64,49,35,47],[64,52,35,50],[64,53,35,51],[64,54,35,52],[65,4,36,2,"twoDaysBefore"],[65,17,36,15],[65,18,36,16,"setHours"],[65,26,36,24],[65,27,36,25],[65,28,36,26],[65,30,36,28],[65,31,36,29],[65,33,36,31],[65,34,36,32],[65,36,36,34],[65,37,36,35],[65,38,36,36],[66,4,38,2],[66,10,38,8,"debtTypeText"],[66,22,38,20],[66,25,38,23,"debt"],[66,29,38,27],[66,30,38,28,"type"],[66,34,38,32],[66,39,38,37],[66,44,38,42],[66,47,38,45],[66,57,38,55],[66,60,38,58],[66,66,38,64],[68,4,40,2],[69,4,41,2],[69,8,41,6,"twoDaysBefore"],[69,21,41,19],[69,24,41,22,"now"],[69,27,41,25],[69,29,41,27],[70,6,42,4],[70,10,42,8],[71,8,43,6],[71,14,43,12,"id"],[71,16,43,14],[71,19,43,17],[71,25,43,23,"Notifications"],[71,38,43,36],[71,39,43,37,"scheduleNotificationAsync"],[71,64,43,62],[71,65,43,63],[72,10,44,8,"content"],[72,17,44,15],[72,19,44,17],[73,12,45,10,"title"],[73,17,45,15],[73,19,45,17],[73,33,45,31],[74,12,46,10,"body"],[74,16,46,14],[74,18,46,16],[74,21,46,19,"debtTypeText"],[74,33,46,31],[74,44,46,42,"debt"],[74,48,46,46],[74,49,46,47,"personName"],[74,59,46,57],[74,69,46,67,"debt"],[74,73,46,71],[74,74,46,72,"totalAmount"],[74,85,46,83],[74,105,46,103],[75,12,47,10,"data"],[75,16,47,14],[75,18,47,16],[76,14,47,18,"debtId"],[76,20,47,24],[76,22,47,26,"debt"],[76,26,47,30],[76,27,47,31,"id"],[77,12,47,34],[78,10,48,8],[78,11,48,9],[79,10,49,8,"trigger"],[79,17,49,15],[79,19,49,17],[80,12,50,10,"type"],[80,16,50,14],[80,18,50,16,"Notifications"],[80,31,50,29],[80,32,50,30,"SchedulableTriggerInputTypes"],[80,60,50,58],[80,61,50,59,"DATE"],[80,65,50,63],[81,12,51,10,"date"],[81,16,51,14],[81,18,51,16,"twoDaysBefore"],[82,10,52,8],[83,8,53,6],[83,9,53,7],[83,10,53,8],[84,8,54,6,"notificationIds"],[84,23,54,21],[84,24,54,22,"push"],[84,28,54,26],[84,29,54,27,"id"],[84,31,54,29],[84,32,54,30],[85,6,55,4],[85,7,55,5],[85,8,55,6],[85,15,55,13,"error"],[85,20,55,18],[85,22,55,20],[86,8,56,6,"console"],[86,15,56,13],[86,16,56,14,"error"],[86,21,56,19],[86,22,56,20],[86,56,56,54],[86,58,56,56,"error"],[86,63,56,61],[86,64,56,62],[87,6,57,4],[88,4,58,2],[90,4,60,2],[91,4,61,2],[91,10,61,8,"onDueDate"],[91,19,61,17],[91,22,61,20],[91,26,61,24,"Date"],[91,30,61,28],[91,31,61,29,"dueDate"],[91,38,61,36],[91,39,61,37],[92,4,62,2,"onDueDate"],[92,13,62,11],[92,14,62,12,"setHours"],[92,22,62,20],[92,23,62,21],[92,24,62,22],[92,26,62,24],[92,27,62,25],[92,29,62,27],[92,30,62,28],[92,32,62,30],[92,33,62,31],[92,34,62,32],[93,4,64,2],[93,8,64,6,"onDueDate"],[93,17,64,15],[93,20,64,18,"now"],[93,23,64,21],[93,25,64,23],[94,6,65,4],[94,10,65,8],[95,8,66,6],[95,14,66,12,"id"],[95,16,66,14],[95,19,66,17],[95,25,66,23,"Notifications"],[95,38,66,36],[95,39,66,37,"scheduleNotificationAsync"],[95,64,66,62],[95,65,66,63],[96,10,67,8,"content"],[96,17,67,15],[96,19,67,17],[97,12,68,10,"title"],[97,17,68,15],[97,19,68,17],[97,39,68,37],[98,12,69,10,"body"],[98,16,69,14],[98,18,69,16],[98,21,69,19,"debtTypeText"],[98,33,69,31],[98,44,69,42,"debt"],[98,48,69,46],[98,49,69,47,"personName"],[98,59,69,57],[98,69,69,67,"debt"],[98,73,69,71],[98,74,69,72,"totalAmount"],[98,85,69,83],[98,101,69,99],[99,12,70,10,"data"],[99,16,70,14],[99,18,70,16],[100,14,70,18,"debtId"],[100,20,70,24],[100,22,70,26,"debt"],[100,26,70,30],[100,27,70,31,"id"],[101,12,70,34],[102,10,71,8],[102,11,71,9],[103,10,72,8,"trigger"],[103,17,72,15],[103,19,72,17],[104,12,73,10,"type"],[104,16,73,14],[104,18,73,16,"Notifications"],[104,31,73,29],[104,32,73,30,"SchedulableTriggerInputTypes"],[104,60,73,58],[104,61,73,59,"DATE"],[104,65,73,63],[105,12,74,10,"date"],[105,16,74,14],[105,18,74,16,"onDueDate"],[106,10,75,8],[107,8,76,6],[107,9,76,7],[107,10,76,8],[108,8,77,6,"notificationIds"],[108,23,77,21],[108,24,77,22,"push"],[108,28,77,26],[108,29,77,27,"id"],[108,31,77,29],[108,32,77,30],[109,6,78,4],[109,7,78,5],[109,8,78,6],[109,15,78,13,"error"],[109,20,78,18],[109,22,78,20],[110,8,79,6,"console"],[110,15,79,13],[110,16,79,14,"error"],[110,21,79,19],[110,22,79,20],[110,59,79,57],[110,61,79,59,"error"],[110,66,79,64],[110,67,79,65],[111,6,80,4],[112,4,81,2],[113,4,83,2],[113,11,83,9,"notificationIds"],[113,26,83,24],[114,2,84,0],[115,2,86,7],[115,17,86,22,"cancelAllNotifications"],[115,39,86,44,"cancelAllNotifications"],[115,40,86,44],[115,42,86,62],[116,4,87,2],[116,10,87,8,"Notifications"],[116,23,87,21],[116,24,87,22,"cancelAllScheduledNotificationsAsync"],[116,60,87,58],[116,61,87,59],[116,62,87,60],[117,2,88,0],[118,2,90,7],[118,17,90,22,"cancelNotification"],[118,35,90,40,"cancelNotification"],[118,36,90,41,"id"],[118,38,90,51],[118,40,90,68],[119,4,91,2],[119,10,91,8,"Notifications"],[119,23,91,21],[119,24,91,22,"cancelScheduledNotificationAsync"],[119,56,91,54],[119,57,91,55,"id"],[119,59,91,57],[119,60,91,58],[120,2,92,0],[121,0,92,1],[121,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","requestNotificationPermissions","scheduleDebtReminder","cancelAllNotifications","cancelNotification"],"mappings":"AAA;sBCM;IDI;OEG;CFY;OGE;CHwD;OIE;CJE;OKE;CLE"},"hasCjsExports":false},"type":"js/module"}]}